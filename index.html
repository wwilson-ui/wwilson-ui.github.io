<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SCOTUS Brief Pro</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <div style="font-weight:bold;">‚öñÔ∏è SCOTUS Brief Pro</div>
    <div id="g_id_onload" data-client_id="129113401099-ihpv7tunjjfeuovepgphcfibf4nqj25g.apps.googleusercontent.com" data-callback="onSignIn"></div>
    <div class="g_id_signin" data-type="standard"></div>
</header>

<main class="app-container">
    <nav class="sidebar">
        <div id="auth-status" style="font-size: 0.7rem; color: #888; margin-bottom: 10px;">Initializing...</div>
        
        <button class="tab-btn active" onclick="switchTab('setup', this)">1. Setup</button>
        <button class="tab-btn" onclick="switchTab('cover', this)">2. Cover & Parties</button>
        <button class="tab-btn" onclick="switchTab('front', this)">3. Questions & Authorities</button>
        <button class="tab-btn" onclick="switchTab('body', this)">4. Argument & Interest</button>
        <button class="tab-btn" onclick="switchTab('export', this)">5. Export</button>
        
        <div class="persistence-zone">
            <button class="action-btn cloud-save-btn" onclick="saveToCloud()">‚òÅÔ∏è Save to Cloud</button>
            <select id="cloud-projects" class="action-btn"></select>
            <div style="display: flex; gap: 5px;">
                <button class="action-btn" style="flex: 1;" onclick="loadProject()">üì• Load</button>
                <button class="action-btn btn-danger" style="flex: 1;" onclick="deleteProject()">üóëÔ∏è Delete</button>
            </div>
        </div>

        <div class="sidebar-footer">
            <a href="terms.html" style="color:#999; text-decoration:none; font-size:0.75rem;">Terms of Service</a>
        </div>
    </nav>

    <section class="input-panel">
        <div id="setup" class="tab-content active">
            <h2>Project Setup</h2>
            <label>Writing For</label>
            <select id="pType" onchange="toggleAmicus(); refresh()">
                <option value="Petitioner">Brief for Petitioner</option>
                <option value="Respondent">Brief for Respondent</option>
                <option value="Amicus Curiae">Brief for Amicus Curiae</option>
            </select>
            
            <div id="amicus-extras" style="display:none; border-left: 3px solid var(--legal-blue); padding-left: 10px; margin-top: 10px;">
                <label>Amicus Name</label>
                <input type="text" id="pAmicusName" oninput="refresh()">
                <label>In Support of</label>
                <select id="pAmicusSupport" onchange="refresh()">
                    <option value="PETITIONER">Petitioner</option>
                    <option value="RESPONDENT">Respondent</option>
                    <option value="NEITHER PARTY">Neither Party</option>
                </select>
            </div>

            <label>Project Title</label>
            <input type="text" id="pTitle" oninput="refresh()">
            <label>Court Term</label>
            <input type="text" id="pTerm" placeholder="October Term 2025" oninput="refresh()">
            <label>Law Firm / Organization</label>
            <input type="text" id="pFirm" oninput="refresh()">
            <label>Date of Filing</label>
            <input type="text" id="pDate" placeholder="Month Day, Year" oninput="refresh()">
        </div>

        <div id="cover" class="tab-content">
            <h2>Cover & Parties</h2>
            <label>Docket Number</label>
            <input type="text" id="pDocket" placeholder="e.g. 24-656" oninput="refresh()">
            
            <label>Petitioners</label>
            <div id="petitioner-list"></div>
            <button class="action-btn" style="height:30px; font-size:0.7rem; width:auto; padding:0 10px;" onclick="addInput('petitioner')">+ Add Petitioner</button>

            <label>Respondents</label>
            <div id="respondent-list"></div>
            <button class="action-btn" style="height:30px; font-size:0.7rem; width:auto; padding:0 10px;" onclick="addInput('respondent')">+ Add Respondent</button>

            <label>Lower Court</label>
            <input type="text" id="pCourt" oninput="refresh()">
        </div>

        <div id="front" class="tab-content">
            <h2>Front Matter</h2>
            <label>Questions Presented</label>
            <div id="question-list"></div>
            <button class="action-btn" style="height:30px; font-size:0.7rem; width:auto; padding:0 10px;" onclick="addInput('question')">+ Add Question</button>

            <label>Table of Authorities (Cases)</label>
            <div id="case-list"></div>
            <button class="action-btn" style="height:30px; font-size:0.7rem; width:auto; padding:0 10px;" onclick="addInput('case')">+ Add Case</button>
        </div>

        <div id="body" class="tab-content">
            <h2>Argument & Interest</h2>
            <label>Interest of Amicus Curiae / Introduction</label>
            <textarea id="pInterest" rows="6" oninput="refresh()"></textarea>
            <label>Full Argument Body</label>
            <textarea id="pArg" rows="12" oninput="refresh()"></textarea>
            <label>Conclusion</label>
            <textarea id="pConc" rows="4" oninput="refresh()"></textarea>
            
            <label>Counsel / Signatories</label>
            <div id="lawyer-list"></div>
            <button class="action-btn" style="height:30px; font-size:0.7rem; width:auto; padding:0 10px;" onclick="addInput('lawyer')">+ Add Counsel</button>
        </div>

        <div id="export" class="tab-content">
            <h2>Export</h2>
            <button class="action-btn cloud-save-btn" onclick="downloadPDF()">üì• DOWNLOAD PDF</button>
            <button class="action-btn" style="background:#333; color:white; margin-top:10px;" onclick="window.print()">üñ®Ô∏è DIRECT PRINT</button>
        </div>
    </section>

    <section class="preview-panel">
        <div id="render-target"></div>
    </section>
</main>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script src="script.js"></script>
</body>
</html>
